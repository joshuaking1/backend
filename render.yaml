services:
  # Backend API Service
  - type: web
    name: tattoo-shop-backend
    env: node
    plan: free
    buildCommand: bash -lc "cd backend && npm install && npm run build"
    startCommand: bash -lc "cd backend && npm run start:prod"
    healthCheckPath: /health
    
    # Environment variables
    envVars:
      - key: NODE_ENV
        value: production
      - key: FRONTEND_URL
        value: https://your-vercel-app.vercel.app  # Update with actual Vercel URL
      - key: DATABASE_URL
        sync: false  # Will be configured in Render dashboard
      - key: JWT_SECRET
        sync: false  # Will be configured in Render dashboard
      - key: REFRESH_TOKEN_SECRET
        sync: false  # Will be configured in Render dashboard

  # Frontend Web Service (if deploying to Render instead of Vercel)
  # - type: web
  #   name: tattoo-shop-frontend
  #   env: static
  #   plan: free
  #   buildCommand: cd ../frontend && npm install && npm run build
  #   staticPublishPath: ../frontend/dist
  #   routes:
  #     - type: rewrite
  #       source: /api/*
  #       destination: https://your-backend-url.onrender.com/api/$1
